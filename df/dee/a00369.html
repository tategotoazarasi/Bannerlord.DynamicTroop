<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Âä®ÊÄÅË£ÖÂ§áÁ≥ªÁªü: Dynamic Troop Equipment System (Reupload)</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Âä®ÊÄÅË£ÖÂ§áÁ≥ªÁªü
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Dynamic Troop Equipment System (Reupload)</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md0"></a></p>
<p><a href="https://deepwiki.com/tategotoazarasi/Bannerlord.DynamicTroop"><img src="https://deepwiki.com/badge.svg" alt="Ask DeepWiki" style="pointer-events: none;" class="inline"/></a> <a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT" style="pointer-events: none;" class="inline"/></a> <a href="https://www.nexusmods.com/mountandblade2bannerlord/mods/9537"><img src="https://img.shields.io/badge/Nexus%20Mods-Dynamic%20Troop-orange" alt="Nexus Mods" class="inline"/></a></p>
<p><b>Dynamic Troop Equipment System</b> revolutionizes <em>Mount &amp; Blade II: Bannerlord</em>'s troop upgrade and equipment mechanics. Gone are the days when soldiers magically conjure armor upon leveling up. Instead, this mod introduces a persistent, dynamic army armory where every piece of equipment must be looted, purchased, or scavenged.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
üìñ Table of Contents</h1>
<ul>
<li>Overview</li>
<li>Key Features<ul>
<li>The Armory System</li>
<li>Battle Equipment Distribution</li>
<li>Looting &amp; Recovery</li>
<li>AI &amp; Logistics</li>
</ul>
</li>
<li>Configuration (MCM)</li>
<li>Advanced Customization</li>
<li>Installation</li>
<li>Compatibility</li>
<li>FAQ</li>
<li>Credits</li>
<li>License</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md3"></a>
Overview</h1>
<p>In the vanilla game, upgrading a troop instantly grants them high-tier gear. With this mod, <b>soldiers are only as good as the gear you have in your stash.</b> You must manage a stockpile of weapons, armor, and horses. If you run out of Tier 5 armor, your Tier 5 troops will fight with whatever lower-tier gear is available‚Äîor go into battle naked.</p>
<p>This mod adds a layer of strategic depth, making looting essential and economic management crucial for maintaining an elite fighting force.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md5"></a>
Key Features</h1>
<h2><a class="anchor" id="autotoc_md6"></a>
The Armory System</h2>
<ul>
<li><b>Persistent Inventory:</b> Your party has a dedicated "Army Armory" (separate from your personal inventory).</li>
<li><b>Recruitment:</b> New recruits bring their starting gear into the armory.</li>
<li><b>Management:</b> Access the armory via Town Menus (<code>Manage Armory</code>) or view it while in settlements.</li>
<li><b>Scrapping:</b> To prevent save bloat, the mod includes an automatic "Scrap" system. If "Commander's Greed" is disabled, the armory automatically sells/deletes the lowest-tier excess items every 3 days if a category exceeds the configured cap.</li>
<li><b>Trade-in:</b> You can exchange excess low-tier equipment for throwing weapons via the town menu to keep your skirmishers supplied.</li>
</ul>
<h2><a class="anchor" id="autotoc_md7"></a>
Battle Equipment Distribution</h2>
<p>Before every battle, the mod dynamically assigns gear to your troops based on their class requirements and what is available in the armory.</p>
<ol type="1">
<li><b>Priority Assignment:</b> Higher-tier troops get first pick of the best gear.</li>
<li><b>Matching Logic:</b><ul>
<li><b>Round 1 (Strict):</b> Exact match of weapon class and usage (e.g., a slash-only 1H sword looks for a slash-only 1H sword).</li>
<li><b>Round 2 (Subtype):</b> Matches weapon functionality (e.g., any 1H polearm).</li>
<li><b>Round 3 (Broad):</b> Broad category matching (e.g., any 1H weapon).</li>
<li><b>Round 4 (Fill):</b> Fills remaining empty slots with any valid broad match.</li>
</ul>
</li>
<li><b>Loyal Equipments:</b> (Configurable) Troops prefer their "vanilla" default gear or gear closest to it (up to +2 tiers higher), rather than simply grabbing the most expensive item available.</li>
<li><b>Emergency Loadout:</b> If the armory is empty, troops will fallback to a "Tier 1" emergency kit based on their culture to avoid being completely unarmed (Configurable).</li>
<li><b>Underequipped Penalty:</b> If a high-tier soldier is forced to wear low-tier gear due to shortages, they suffer a morale penalty in battle.</li>
</ol>
<h2><a class="anchor" id="autotoc_md8"></a>
Looting &amp; Recovery</h2>
<ul>
<li><b>Scavenging:</b> Equipment is not static. When an enemy falls, their gear is added to the "Loot" pool. When your soldier falls, their gear is added to the "Recovery" pool.</li>
<li><b>Drop Rates:</b> Looting is calculated based on a configurable drop rate.</li>
<li><b>Durability:</b><ul>
<li>Armor protecting a body part that receives a fatal blow has a chance to be destroyed.</li>
<li>Shields that break in battle are lost.</li>
<li>Spent ammunition (arrows/bolts) is lost; unused ammo is recovered.</li>
</ul>
</li>
<li><b>Map Events:</b> Post-battle loot is shared dynamically between allied parties based on contribution.</li>
</ul>
<h2><a class="anchor" id="autotoc_md9"></a>
AI &amp; Logistics ("Cut Their Supply")</h2>
<ul>
<li><b>AI Armories:</b> AI Lord parties also utilize this system. They generate equipment daily based on their clan tier, fiefs, and prosperity.</li>
<li><b>Reinforcement Caravans:</b> Enemy towns will dispatch physical "Reinforcement Caravan" parties carrying gear and troops to their Lords.<ul>
<li><b>Strategic Interception:</b> You can attack these caravans to deny the enemy lord their equipment supply, effectively weakening their armies over time.</li>
<li><em>Note: These caravans do not trade with the player.</em></li>
</ul>
</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md11"></a>
Configuration</h1>
<p>This mod relies on <b>Mod Configuration Menu (MCM)</b>. You can tweak the following settings in-game:</p>
<ul>
<li><b>Difficulty:</b> Scales the equipment generation for AI and shops.</li>
<li><b>Drop Rate:</b> Multiplier for how much loot you get from enemies.</li>
<li><b>Commander's Greed:</b><ul>
<li><em>OFF (Default):</em> You cannot take items <em>out</em> of the Army Armory for personal use (selling/smelting). Keeps the economy balanced.</li>
<li><em>ON:</em> You can treat the Army Armory like a personal stash.</li>
</ul>
</li>
<li><b>Loyal Equipments:</b> Toggles whether troops prioritize their cultural/default gear style over raw stats.</li>
<li><b>Underequipped:</b> Toggles the morale penalty for soldiers with gear below their rank.</li>
<li><b>Emergency Loadout:</b> Toggles whether troops get free T1 gear if the armory is empty.</li>
<li><b>Randomize Recruit Gear:</b> Recruits start with varied equipment within their tier/culture.</li>
<li><b>Scrap Cap:</b> Sets the limit for item stacks before the auto-cleaner deletes junk (optimization).</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md13"></a>
Advanced Customization</h1>
<h2><a class="anchor" id="autotoc_md14"></a>
Item Blacklist</h2>
<p>You can prevent specific items from being used by the system (e.g., overpowered modded weapons or bugged items).</p><ol type="1">
<li>Navigate to the module folder: <code>Modules/DynamicTroopEquipmentReupload/</code></li>
<li>Edit <code>blacklist.json</code>.</li>
<li>You can block items by <code>string_id</code>, <code>name</code>, or using Regex patterns.</li>
</ol>
<h2><a class="anchor" id="autotoc_md15"></a>
Debugging</h2>
<p>The mod includes extensive logging capabilities via <code>log4net</code>.</p><ul>
<li>Check <code>log.txt</code> in the module folder for detailed operations.</li>
<li>In-game menu options allow exporting/importing the armory state for testing.</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md17"></a>
Installation</h1>
<ol type="1">
<li>Download the mod.</li>
<li>Ensure you have the dependencies installed:<ul>
<li><a href="https://www.nexusmods.com/mountandblade2bannerlord/mods/2006">Harmony</a></li>
<li><a href="https://www.nexusmods.com/mountandblade2bannerlord/mods/2018">ButterLib</a></li>
<li><a href="https://www.nexusmods.com/mountandblade2bannerlord/mods/2102">UIExtenderEx</a></li>
<li><a href="https://www.nexusmods.com/mountandblade2bannerlord/mods/612">Mod Configuration Menu (MCM)</a></li>
</ul>
</li>
<li>Extract the <code><a class="el" href="../../d3/d00/a00113.html">DynamicTroopEquipmentReupload</a></code> folder into your game's <code>Modules</code> directory.</li>
<li>Enable the mod in the Bannerlord Launcher.</li>
<li><b>Recommended:</b> Use <a href="https://www.nexusmods.com/mountandblade2bannerlord/mods/1">BLSE (Bannerlord Software Extender)</a> for better stability.</li>
</ol>
<hr  />
<h1><a class="anchor" id="autotoc_md19"></a>
Compatibility</h1>
<ul>
<li><b>Save Game:</b> Safe to add to an existing save (your armory will start empty). <b>Do not remove</b> from an active save without backing up; troops may revert to default or lose gear depending on how the game handles the transition.</li>
<li><b>Item Mods (OSA, RBM, etc.):</b> Highly compatible. The mod reads item stats dynamically.<ul>
<li><em>Confirmed working:</em> Realistic Battle Mod (RBM), Open Source Armory (OSA), BannerKings.</li>
</ul>
</li>
<li><b>Dismemberment Mods:</b> May have compatibility issues depending on how the death event is handled.</li>
<li><b>Total Conversions:</b> Generally compatible if they use standard equipment sets.</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md21"></a>
FAQ</h1>
<p><b>Q: My soldiers are spawning naked!</b> <b>A:</b> Your armory is empty. You must loot enemies or buy gear in towns and deposit it into the Army Armory (via the Town Menu). If you are mid-game, you start with nothing.</p>
<p><b>Q: Why do my troops keep losing their gear?</b> <b>A:</b> Gear is destroyed on death (armor breaking mechanics) or lost if it breaks (shields). If you use "Commander's Greed = OFF", the system also scraps low-tier junk automatically to prevent save file lag.</p>
<p><b>Q: Can I use this with RBM?</b> <b>A:</b> Yes, it is fully compatible.</p>
<p><b>Q: Do horses consume the armory stock?</b> <b>A:</b> Upgrading a troop to cavalry requires a horse item (standard game mechanic), but <em>deploying</em> them into battle requires a horse in the Army Armory. Avoid sending cavalry into Hideouts, as a game bug can sometimes cause them to lose their mounts.</p>
<p><b>Q: Can I take items out of the armory to sell?</b> <b>A:</b> Only if you enable "Commander's Greed" in the Mod Options. By default, this is disabled to prevent the player from exploiting the army pool for infinite money.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md23"></a>
Credits</h1>
<p>This project is an open-source continuation and reupload of the original Dynamic Troop Equipment System.</p>
<ul>
<li><b>Original Author:</b> <a href="https://github.com/tategotoazarasi">@tategotoazarasi</a> - Created the core concept and logic.</li>
<li><b>Current Maintainer:</b> <a href="https://github.com/alemreM">@alemreM</a> - Updates, fixes, and reupload.</li>
<li><b>Russian Localization:</b> UmarKot</li>
<li><b>German Localization:</b> pandory</li>
<li><b>Chinese Localization:</b> Included in the base module.</li>
</ul>
<h1><a class="anchor" id="autotoc_md24"></a>
License</h1>
<p>This project is licensed under the MIT License.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md26"></a>
Links</h2>
<ul>
<li><a href="https://github.com/tategotoazarasi/Bannerlord.DynamicTroop"><b>GitHub Repository</b></a></li>
<li><a href="https://www.nexusmods.com/mountandblade2bannerlord/mods/9537"><b>Nexus Mods</b></a></li>
<li><a href="https://steamcommunity.com/sharedfiles/filedetails/?id=3119116807"><b>Steam Workshop</b></a></li>
<li><a href="https://discord.gg/NybRg85KVK"><b>Discord</b></a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
